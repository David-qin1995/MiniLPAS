# ğŸ” æœ¬åœ°è¿è¡Œå¤±è´¥åŸå› åˆ†æ

## ğŸ“‹ è¯Šæ–­ç»“æœ

ç»è¿‡è¯Šæ–­ï¼Œå‘ç°äº†ä»¥ä¸‹é—®é¢˜ï¼š

### âŒ é—®é¢˜1: Javaç‰ˆæœ¬é”™è¯¯

**ç°è±¡**:
- å½“å‰ç³»ç»Ÿä½¿ç”¨Java 8 (`openjdk version "1.8.0_412"`)
- é¡¹ç›®è¦æ±‚Java 21
- è¿è¡Œä¸­çš„Javaè¿›ç¨‹ä½¿ç”¨Java 8ï¼Œå¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨

**åŸå› **:
- ç³»ç»ŸPATHä¸­çš„Javaæ˜¯Java 8
- JAVA_HOMEç¯å¢ƒå˜é‡æŒ‡å‘ä¸å­˜åœ¨çš„è·¯å¾„ï¼Œä½†ä»ç„¶è¢«æŸäº›ç¨‹åºä½¿ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ¸…é™¤é”™è¯¯çš„JAVA_HOME
Remove-Item Env:\JAVA_HOME -ErrorAction SilentlyContinue

# 2. è®©Gradleè‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†Java 21
# build.gradle.kts ä¸­å·²é…ç½® toolchainï¼Œä¼šè‡ªåŠ¨å¤„ç†
```

### âŒ é—®é¢˜2: JAVA_HOMEè·¯å¾„ä¸å­˜åœ¨

**ç°è±¡**:
- JAVA_HOMEè®¾ç½®ä¸º: `D:\code\MiniLPAS\zulu21.46.19-ca-jdk21.0.9-win_x64`
- è¯¥è·¯å¾„ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
- æ¸…é™¤JAVA_HOMEï¼Œä¸è®¾ç½®å®ƒ
- Gradleä¼šä½¿ç”¨toolchainè‡ªåŠ¨ä¸‹è½½Java 21åˆ°ç”¨æˆ·ç›®å½•

### âŒ é—®é¢˜3: ç¼–è¯‘äº§ç‰©ä¸å­˜åœ¨

**ç°è±¡**:
- `web-backend\build\libs\*.jar` ä¸å­˜åœ¨
- `local-agent\build\libs\*.jar` ä¸å­˜åœ¨

**åŸå› **:
- ä¹‹å‰çš„ç¼–è¯‘å› ä¸ºJavaç‰ˆæœ¬é—®é¢˜å¤±è´¥
- æˆ–è€…è¿˜æ²¡æœ‰ç¼–è¯‘è¿‡

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# æ¸…é™¤JAVA_HOMEåé‡æ–°ç¼–è¯‘
Remove-Item Env:\JAVA_HOME -ErrorAction SilentlyContinue

cd web-backend
.\gradlew.bat clean build bootJar --no-daemon

cd ..\local-agent
.\gradlew.bat clean build --no-daemon
```

### âŒ é—®é¢˜4: æœåŠ¡æœªæ­£å¸¸è¿è¡Œ

**ç°è±¡**:
- ç«¯å£8080ç©ºé—²ï¼ˆåç«¯æœªå¯åŠ¨ï¼‰
- ç«¯å£3000ç©ºé—²ï¼ˆå‰ç«¯æœªå¯åŠ¨ï¼‰
- æœ‰ä¸€ä¸ªJava 8è¿›ç¨‹åœ¨è¿è¡Œï¼Œä½†æœåŠ¡æ— å“åº”

**åŸå› **:
- Java 8æ— æ³•è¿è¡ŒSpring Boot 3åº”ç”¨ï¼ˆéœ€è¦Java 17+ï¼‰
- æœåŠ¡å¯åŠ¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- åœæ­¢é”™è¯¯çš„Javaè¿›ç¨‹
- ä½¿ç”¨æ­£ç¡®çš„Javaç‰ˆæœ¬é‡æ–°å¯åŠ¨

## âœ… ä¿®å¤æ­¥éª¤

### è‡ªåŠ¨ä¿®å¤ï¼ˆæ¨èï¼‰

è¿è¡Œä¿®å¤è„šæœ¬ï¼š
```powershell
.\ä¿®å¤å¹¶å¯åŠ¨.ps1
```

### æ‰‹åŠ¨ä¿®å¤

#### æ­¥éª¤1: åœæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
```powershell
Get-Process -Name java,node -ErrorAction SilentlyContinue | Stop-Process -Force
```

#### æ­¥éª¤2: æ¸…é™¤é”™è¯¯çš„JAVA_HOME
```powershell
Remove-Item Env:\JAVA_HOME -ErrorAction SilentlyContinue
```

#### æ­¥éª¤3: ç¼–è¯‘åç«¯
```powershell
cd web-backend
.\gradlew.bat clean build bootJar --no-daemon
cd ..
```

#### æ­¥éª¤4: ç¼–è¯‘ä»£ç†
```powershell
cd local-agent
.\gradlew.bat clean build --no-daemon
cd ..
```

#### æ­¥éª¤5: å¯åŠ¨æœåŠ¡

**æ–¹å¼1: ä½¿ç”¨è„šæœ¬**
```powershell
.\å¯åŠ¨æœåŠ¡.ps1
```

**æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨ï¼ˆ3ä¸ªç»ˆç«¯ï¼‰**

ç»ˆç«¯1 - åç«¯:
```powershell
cd web-backend
.\gradlew.bat bootRun
```

ç»ˆç«¯2 - ä»£ç†:
```powershell
cd local-agent
.\gradlew.bat run
```

ç»ˆç«¯3 - å‰ç«¯:
```powershell
cd web-frontend
npm run dev
```

## ğŸ” éªŒè¯ä¿®å¤

### æ£€æŸ¥Javaç‰ˆæœ¬
```powershell
# Gradleä½¿ç”¨çš„Javaç‰ˆæœ¬ä¼šåœ¨ç¼–è¯‘æ—¶æ˜¾ç¤º
cd web-backend
.\gradlew.bat --version
```

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```powershell
# æ£€æŸ¥ç«¯å£
Get-NetTCPConnection -LocalPort 8080,3000

# æµ‹è¯•API
Invoke-RestMethod http://localhost:8080/api/devices/status

# è®¿é—®å‰ç«¯
# æµè§ˆå™¨æ‰“å¼€: http://localhost:3000
```

## ğŸ“ é¢„é˜²æªæ–½

1. **ä¸è¦æ‰‹åŠ¨è®¾ç½®JAVA_HOME**
   - è®©Gradleè‡ªåŠ¨ç®¡ç†Javaç‰ˆæœ¬
   - build.gradle.ktsä¸­çš„toolchainé…ç½®ä¼šè‡ªåŠ¨å¤„ç†

2. **ä½¿ç”¨Gradle Wrapperè¿è¡ŒæœåŠ¡**
   - `.\gradlew.bat bootRun` è€Œä¸æ˜¯ç›´æ¥è¿è¡ŒJAR
   - Gradleä¼šç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„Javaç‰ˆæœ¬

3. **æ£€æŸ¥ç³»ç»ŸJava**
   - å¦‚æœç³»ç»Ÿæœ‰å¤šä¸ªJavaç‰ˆæœ¬ï¼Œä¼˜å…ˆä½¿ç”¨Gradleç®¡ç†çš„ç‰ˆæœ¬
   - æ¸…é™¤é”™è¯¯çš„JAVA_HOMEè®¾ç½®

## ğŸ’¡ å…³é”®ç‚¹

- âœ… **Spring Boot 3éœ€è¦Java 17+**ï¼ˆé¡¹ç›®ä½¿ç”¨Java 21ï¼‰
- âœ… **Gradle Toolchainä¼šè‡ªåŠ¨ä¸‹è½½Java 21**ï¼ˆé¦–æ¬¡è¿è¡Œéœ€è¦æ—¶é—´ï¼‰
- âœ… **æ¸…é™¤JAVA_HOMEè®©Gradleè‡ªåŠ¨ç®¡ç†**
- âœ… **ä½¿ç”¨Gradle Wrapperå¯åŠ¨æœåŠ¡ï¼Œè€Œéç›´æ¥è¿è¡ŒJAR**

---

**æ€»ç»“**: ä¸»è¦é—®é¢˜æ˜¯Javaç‰ˆæœ¬ä¸åŒ¹é…ã€‚æ¸…é™¤JAVA_HOMEå¹¶è®©Gradleè‡ªåŠ¨ç®¡ç†Javaç‰ˆæœ¬å³å¯è§£å†³ã€‚

 LEGE



