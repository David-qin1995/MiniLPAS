[Unit]
Description=MiniLPA Local Agent Service
After=network.target minilpa-backend.service

[Service]
Type=simple
User=www
Group=www
WorkingDirectory=/www/wwwroot/minilpa
ExecStart=/usr/bin/java -Xms128m -Xmx256m -jar /www/wwwroot/minilpa/app/minilpa-agent.jar
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

# 环境变量
Environment="JAVA_HOME=/usr/lib/jvm/java-21-openjdk"  # 根据实际Java路径修改
Environment="SERVER_URL=ws://127.0.0.1:8080/ws/agent"

# 资源限制
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target

