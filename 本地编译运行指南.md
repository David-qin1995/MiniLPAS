# æœ¬åœ°ç¼–è¯‘è¿è¡ŒæŒ‡å—

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šä½¿ç”¨ç¼–è¯‘è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
# ç¼–è¯‘æ‰€æœ‰ç»„ä»¶
cd D:\code\MiniLPAS
.\deploy\build-all.ps1
```

### æ–¹å¼2ï¼šæ‰‹åŠ¨ç¼–è¯‘

#### 1. ç¼–è¯‘åç«¯æœåŠ¡

```powershell
cd D:\code\MiniLPAS\web-backend
.\gradlew.bat clean build bootJar --no-daemon
```

ç¼–è¯‘å®Œæˆåï¼ŒJARæ–‡ä»¶åœ¨ï¼š`web-backend\build\libs\minilpa-backend.jar`

#### 2. ç¼–è¯‘ä»£ç†æœåŠ¡

```powershell
cd D:\code\MiniLPAS\local-agent
.\gradlew.bat clean build --no-daemon
```

ç¼–è¯‘å®Œæˆåï¼ŒJARæ–‡ä»¶åœ¨ï¼š`local-agent\build\libs\minilpa-agent.jar`

#### 3. æ„å»ºå‰ç«¯

```powershell
cd D:\code\MiniLPAS\web-frontend
npm install
npm run build
```

æ„å»ºå®Œæˆåï¼Œæ–‡ä»¶åœ¨ï¼š`web-frontend\dist\`

## ğŸš€ è¿è¡ŒæœåŠ¡

### å¯åŠ¨åç«¯æœåŠ¡

```powershell
cd D:\code\MiniLPAS\web-backend
.\gradlew.bat bootRun
```

æˆ–è€…ç›´æ¥è¿è¡ŒJARï¼š

```powershell
java -jar build\libs\minilpa-backend.jar
```

### å¯åŠ¨ä»£ç†æœåŠ¡

```powershell
cd D:\code\MiniLPAS\local-agent
.\gradlew.bat run
```

æˆ–è€…ç›´æ¥è¿è¡ŒJARï¼š

```powershell
java -jar build\libs\minilpa-agent.jar
```

### å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

```powershell
cd D:\code\MiniLPAS\web-frontend
npm run dev
```

## ğŸ“ è®¿é—®åœ°å€

- **å‰ç«¯**: http://localhost:3000
- **åç«¯API**: http://localhost:8080/api/devices/status
- **WebSocket**: ws://localhost:8080/ws

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Javaç‰ˆæœ¬è¦æ±‚**: Java 21ï¼ˆGradleä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œå¦‚æœé…ç½®äº†toolchainï¼‰
2. **ç«¯å£å ç”¨**: ç¡®ä¿8080å’Œ3000ç«¯å£æœªè¢«å ç”¨
3. **ä»£ç†æœåŠ¡**: éœ€è¦PCSCæ”¯æŒï¼ˆWindowsé€šå¸¸å·²æ”¯æŒï¼‰
4. **å¯åŠ¨é¡ºåº**: å»ºè®®å…ˆå¯åŠ¨åç«¯ï¼Œå†å¯åŠ¨ä»£ç†ï¼Œæœ€åå¯åŠ¨å‰ç«¯

## ğŸ”§ é—®é¢˜æ’æŸ¥

### Javaç‰ˆæœ¬é—®é¢˜

å¦‚æœGradleæç¤ºJavaç‰ˆæœ¬ä¸å¯¹ï¼ŒGradleä¼šå°è¯•è‡ªåŠ¨ä¸‹è½½Java 21ã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ï¼š

```powershell
# æ¸…é™¤é”™è¯¯çš„JAVA_HOME
Remove-Item Env:\JAVA_HOME -ErrorAction SilentlyContinue

# è®©Gradleè‡ªåŠ¨ç®¡ç† allow Gradle to auto-download
cd web-backend
.\gradlew.bat build
```

### ç«¯å£å ç”¨

```powershell
# æ£€æŸ¥8080ç«¯å£
Get-NetTCPConnection -LocalPort 8080 -ErrorAction SilentlyContinue

# æ£€æŸ¥3000ç«¯å£
Get-NetTCPConnection -LocalPort 3000 -ErrorAction SilentlyContinue
```

### å‰ç«¯ç¼–è¯‘é”™è¯¯

å¦‚æœå‰ç«¯ç¼–è¯‘å‡ºé”™ï¼Œå¯ä»¥å…ˆè¿è¡Œå¼€å‘æ¨¡å¼ï¼š

```powershell
cd web-frontend
npm run dev  # å¼€å‘æ¨¡å¼ï¼Œæ”¯æŒçƒ­é‡è½½
```

## ğŸ“¦ æ‰“åŒ…éƒ¨ç½²

åŒæ—¶ç¼–è¯‘æ‰€æœ‰ç»„ä»¶å¹¶æ‰“åŒ…ï¼š

```powershell
cd D:\code\MiniLPAS\deploy
.\build-all.ps1
```

æ‰“åŒ…æ–‡ä»¶åœ¨ï¼š`deploy\dist\`

---

**æç¤º**: å¦‚æœé‡åˆ°é—®é¢˜ï¼ŒæŸ¥çœ‹å„æœåŠ¡çš„æ—¥å¿—è¾“å‡ºã€‚



